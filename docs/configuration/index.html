<html><head><title>Configuration / Antwar</title><meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, minimal-ui"><link rel="icon" type="image/png" href="../../assets/img/favicon.png"><link rel="alternate" type="application/atom+xml" href="/atom.xml"><link rel="stylesheet" href="../../assets/main.css"></head><body><div><div class="nav__wrapper"><input type="checkbox" class="nav__toggle" id="nav__toggle"><label class="nav__toggle-label" for="nav__toggle"></label><nav class="nav"><div class="nav__link"><a href="/">Home</a></div><div class="nav__link"><a href="/docs">Documentation</a></div><div class="nav__link"><a href="/blog">Blog</a></div></nav></div><main role="main"><div class="post"><div class="docs-nav__wrapper"><h4 class="docs-nav--header">Documentation</h4><div class="docs-nav"><a href="/docs/getting-started" class="docs-nav__link">Getting started</a><a href="/docs/faq" class="docs-nav__link">FAQ</a><span class="docs-nav__link docs-nav__link--current">Configuration</span><a href="/docs/deploying-to-github-pages" class="docs-nav__link">Deploying to GitHub Pages</a><a href="/docs/themes" class="docs-nav__link">Theming</a></div></div><h1 class="post__heading">Configuration</h1><div class="post__content"><div><p>Just like <a href="https://webpack.github.io/">Webpack</a>, the heart of Antwar, also Antwar has been built on the configuration. <code>antwar.config.js</code> describes all metadata related to your site. This includes basic information such as site title, author, sections and so on. It also defines which theme and which plugins you use.</p>
<h2 id="basic-example">Basic Example</h2>
<p>This is (more or less) the configuration for this site. If you are used to working with javascript, most of this should look familiar.</p>
<pre><code class="lang-javascript"><span class="hljs-pi">&apos;use strict&apos;</span>;

<span class="hljs-keyword">var</span> rssPlugin = <span class="hljs-built_in">require</span>(<span class="hljs-string">&apos;antwar-rss-plugin&apos;</span>);
<span class="hljs-keyword">var</span> prevnextPlugin = <span class="hljs-built_in">require</span>(<span class="hljs-string">&apos;antwar-prevnext-plugin&apos;</span>);
<span class="hljs-keyword">var</span> highlightPlugin = <span class="hljs-built_in">require</span>(<span class="hljs-string">&apos;antwar-highlight-plugin&apos;</span>);

<span class="hljs-built_in">module</span>.exports = {

  <span class="hljs-comment">// Folder name for the output</span>
  output: <span class="hljs-string">&apos;build&apos;</span>,

  <span class="hljs-comment">// Name of the site</span>
  name: <span class="hljs-string">&apos;Antwar&apos;</span>,

  <span class="hljs-comment">// Name of the author</span>
  author: <span class="hljs-string">&apos;Antwar&apos;</span>,

  <span class="hljs-comment">// Branch to deploy to.</span>
  deploy: {
    branch: <span class="hljs-string">&apos;gh-pages&apos;</span>,
  },

  plugins: [
    rssPlugin(),
    prevnextPlugin(),
    highlightPlugin({
      style: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
        <span class="hljs-built_in">require</span>(<span class="hljs-string">&apos;highlight.js/styles/github.css&apos;</span>);
      },
      languages: [<span class="hljs-string">&apos;javascript&apos;</span>],
    })
  ],

  <span class="hljs-comment">// Definitions for where the content is located</span>
  paths: {
    <span class="hljs-string">&apos;/&apos;</span>: {
      path: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
        <span class="hljs-keyword">return</span> <span class="hljs-built_in">require</span>.context(<span class="hljs-string">&apos;./pages&apos;</span>);
      }
    },
    blog: {
      path: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
        <span class="hljs-keyword">return</span> <span class="hljs-built_in">require</span>.context(<span class="hljs-string">&apos;./posts&apos;</span>, <span class="hljs-literal">true</span>, <span class="hljs-regexp">/^\.\/.*\.md$/</span>);
      },
      draft: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
        <span class="hljs-keyword">return</span> <span class="hljs-built_in">require</span>.context(<span class="hljs-string">&apos;./drafts&apos;</span>, <span class="hljs-literal">true</span>, <span class="hljs-regexp">/^\.\/.*\.md$/</span>);
      },
      layout: <span class="hljs-string">&apos;blog&apos;</span>,
      title: <span class="hljs-string">&apos;Blog posts&apos;</span>,
    },
    docs: {
      path: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
        <span class="hljs-keyword">return</span> <span class="hljs-built_in">require</span>.context(<span class="hljs-string">&apos;./docs&apos;</span>, <span class="hljs-literal">true</span>, <span class="hljs-regexp">/^\.\/.*\.md$/</span>);
      },
      sort: <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">items</span>) </span>{
        <span class="hljs-keyword">return</span> _.sortBy(items, <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">item</span>) </span>{<span class="hljs-keyword">return</span> item.file.sort});
      },
      processItem: {
        isDraft: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">o</span>) </span>{
          <span class="hljs-keyword">return</span> o.file.isDraft;
        },
      },
      layout: <span class="hljs-string">&apos;docs&apos;</span>,
      title: <span class="hljs-string">&apos;Documentation&apos;</span>,
    }
  },

  <span class="hljs-comment">// Theme and config for the theme</span>
  theme: {
    name: <span class="hljs-string">&apos;antwar-default-theme&apos;</span>,
    navigation: [
      {title: <span class="hljs-string">&apos;Home&apos;</span>, url: <span class="hljs-string">&apos;/&apos;</span>},
      {title: <span class="hljs-string">&apos;Documentation&apos;</span>, url: <span class="hljs-string">&apos;/docs&apos;</span>},
      {title: <span class="hljs-string">&apos;Blog&apos;</span>, url: <span class="hljs-string">&apos;/blog&apos;</span>}
    ],
    analyticsId: <span class="hljs-string">&apos;UA-XXXXXXXXX-1&apos;</span>,
    customStyles: <span class="hljs-string">&apos;specific.scss&apos;</span>,
  }
};
</code></pre>
<h2 id="advanced-configuration">Advanced Configuration</h2>
<p>The configuration is available at page level so you can use it in quite imaginative manners.</p>
<p>To give you a better idea of how to approach configuration consider the real life example below. It has been taken from <a href="http://survivejs.com/">SurviveJS</a> site and is actually quite advanced example. You don&apos;t need anything this complex for a casual blog. The default settings will get you quite far with that.</p>
<pre><code class="lang-javascript"><span class="hljs-pi">&apos;use strict&apos;</span>;
<span class="hljs-keyword">var</span> _ = <span class="hljs-built_in">require</span>(<span class="hljs-string">&apos;lodash&apos;</span>);
<span class="hljs-keyword">var</span> removeMd = <span class="hljs-built_in">require</span>(<span class="hljs-string">&apos;remove-markdown&apos;</span>);
<span class="hljs-keyword">var</span> markdown = <span class="hljs-built_in">require</span>(<span class="hljs-string">&apos;commonmark&apos;</span>);
<span class="hljs-keyword">var</span> highlightPlugin = <span class="hljs-built_in">require</span>(<span class="hljs-string">&apos;antwar-highlight-plugin&apos;</span>);
<span class="hljs-keyword">var</span> prevnextPlugin = <span class="hljs-built_in">require</span>(<span class="hljs-string">&apos;antwar-prevnext-plugin&apos;</span>);

<span class="hljs-keyword">var</span> mdReader = <span class="hljs-keyword">new</span> markdown.Parser();
<span class="hljs-keyword">var</span> mdWriter = <span class="hljs-keyword">new</span> markdown.HtmlRenderer();

<span class="hljs-built_in">module</span>.exports = {
  <span class="hljs-comment">// copying files so I can refer to them easily from content</span>
  assets: [
    {
      from: <span class="hljs-string">&apos;manuscript/images&apos;</span>,
      to: <span class="hljs-string">&apos;images&apos;</span>,
    },
    {
      from: <span class="hljs-string">&apos;./CNAME&apos;</span>,
      to: <span class="hljs-string">&apos;./&apos;</span>,
    }
  ],
  <span class="hljs-comment">// setting up general meta for output and such</span>
  output: <span class="hljs-string">&apos;build&apos;</span>,
  name: <span class="hljs-string">&apos;SurviveJS - Survive the jungles of JavaScript&apos;</span>,
  author: <span class="hljs-string">&apos;Juho Veps&#xE4;l&#xE4;inen&apos;</span>,
  deploy: {
    branch: <span class="hljs-string">&apos;gh-pages&apos;</span>,
  },
  <span class="hljs-comment">// global plugins for whole site</span>
  plugins: [
    highlightPlugin({
      style: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
        <span class="hljs-built_in">require</span>(<span class="hljs-string">&apos;highlight.js/styles/github.css&apos;</span>);
      },
      languages: [<span class="hljs-string">&apos;bash&apos;</span>, <span class="hljs-string">&apos;javascript&apos;</span>, <span class="hljs-string">&apos;json&apos;</span>, <span class="hljs-string">&apos;html&apos;</span>],
    }),
    prevnextPlugin({
      bodyContent: prevnextPlugin.bodyContent({
        previous: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">o</span>) </span>{
          <span class="hljs-keyword">return</span> o.title;
        },
        previousUrl: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">o</span>) </span>{
          <span class="hljs-keyword">return</span> <span class="hljs-string">&apos;../&apos;</span> + o.split(<span class="hljs-string">&apos;/&apos;</span>).slice(<span class="hljs-number">1</span>).join(<span class="hljs-string">&apos;/&apos;</span>);
        },
        next: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">o</span>) </span>{
          <span class="hljs-keyword">return</span> o.title;
        },
        nextUrl: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">o</span>) </span>{
          <span class="hljs-keyword">return</span> <span class="hljs-string">&apos;../&apos;</span> + o.split(<span class="hljs-string">&apos;/&apos;</span>).slice(<span class="hljs-number">1</span>).join(<span class="hljs-string">&apos;/&apos;</span>);
        },
      })
    }),
  ],
  <span class="hljs-comment">// choosing a theme and setting some theme specific settings</span>
  theme: {
    customStyles: <span class="hljs-string">&apos;custom.scss&apos;</span>,
    name: <span class="hljs-string">&apos;antwar-default-theme&apos;</span>,
    navigation: [
      {title: <span class="hljs-string">&apos;Home&apos;</span>, url: <span class="hljs-string">&apos;/&apos;</span>},
      {title: <span class="hljs-string">&apos;Table of Contents&apos;</span>, url: <span class="hljs-string">&apos;/webpack_react&apos;</span>},
    ],
  },
  <span class="hljs-comment">// describing site structure and content mapping</span>
  paths: {
    <span class="hljs-string">&apos;/&apos;</span>: {
      path: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
        <span class="hljs-comment">// require.context is a feature of Webpack. It just loads</span>
        <span class="hljs-comment">// the content of given directory so we can process it</span>
        <span class="hljs-keyword">return</span> <span class="hljs-built_in">require</span>.context(<span class="hljs-string">&apos;./pages&apos;</span>);
      },
    },
    <span class="hljs-comment">// mapping an ebook (directory of Markdown files) to a section</span>
    webpack_react: {
      title: <span class="hljs-string">&apos;Table of Contents&apos;</span>,
      path: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
        <span class="hljs-comment">// here we want just Markdown files. In order to be future proof</span>
        <span class="hljs-comment">// I get the files recursively (second parameter). This would</span>
        <span class="hljs-comment">// just generate a deeper structure.</span>
        <span class="hljs-keyword">return</span> <span class="hljs-built_in">require</span>.context(<span class="hljs-string">&apos;./manuscript&apos;</span>, <span class="hljs-literal">true</span>, <span class="hljs-regexp">/^\.\/.*\.md$/</span>);
      },
      processItem: {
        title: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">o</span>) </span>{
          <span class="hljs-comment">// picking title from first line (Markdown stripped)</span>
          <span class="hljs-keyword">return</span> removeMd(o.file.__content.split(<span class="hljs-string">&apos;\n&apos;</span>)[<span class="hljs-number">0</span>]);
        },
        content: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">o</span>) </span>{
          <span class="hljs-comment">// picking everything except the first line (title, remember)</span>
          <span class="hljs-keyword">var</span> content = o.file.__content.split(<span class="hljs-string">&apos;\n&apos;</span>).slice(<span class="hljs-number">1</span>).join(<span class="hljs-string">&apos;\n&apos;</span>);

          <span class="hljs-comment">// rendering to html</span>
          <span class="hljs-keyword">return</span> mdWriter.render(mdReader.parse(content));
        },
        preview: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">o</span>) </span>{
          <span class="hljs-comment">// picking a limited amount of content to show for preview</span>
          <span class="hljs-keyword">var</span> previewLimit = <span class="hljs-number">150</span>;
          <span class="hljs-keyword">var</span> content = o.file.__content.split(<span class="hljs-string">&apos;\n&apos;</span>).slice(<span class="hljs-number">1</span>).join(<span class="hljs-string">&apos;\n&apos;</span>);
          <span class="hljs-keyword">var</span> stripped = removeMd(content);

          <span class="hljs-keyword">if</span>(stripped.length &gt; previewLimit) {
            <span class="hljs-keyword">return</span> stripped.substr(<span class="hljs-number">0</span>, previewLimit) + <span class="hljs-string">&apos;&#x2026;&apos;</span>;
          }

          <span class="hljs-keyword">return</span> stripped;
        },
      },
      sort: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">files</span>) </span>{
        <span class="hljs-comment">// sorting section index based on an order defined at a separate file</span>
        <span class="hljs-keyword">var</span> order = <span class="hljs-built_in">require</span>(<span class="hljs-string">&apos;raw!./manuscript/Book.txt&apos;</span>).split(<span class="hljs-string">&apos;\n&apos;</span>).filter(id);
        <span class="hljs-keyword">var</span> ret = [];

        order.forEach(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">name</span>) </span>{
          <span class="hljs-keyword">var</span> result = _.findWhere(files, {
            name: name,
          });

          <span class="hljs-keyword">if</span>(result) {
            ret.push(result);
          }
        });

        <span class="hljs-keyword">return</span> ret;
      },
    }
  }
};

<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">id</span>(<span class="hljs-params">a</span>) </span>{<span class="hljs-keyword">return</span> a;}
</code></pre>
<p>In practice your configuration will likely look very different compared to this example. As you can see, Antwar allows you to shape a section mapping quite freely. The system leverages Webpack heavily.</p>
<p>In addition you may use whatever tricks you have as long as they work in frontend environment. This means you won&apos;t have direct access to Node modules such as <code>fs</code> but in practice this isn&apos;t a problem as Webpack can help you as above.</p>
<p>Each of those <code>processItem</code> hooks accepts an object as a parameter. Through it you can access <code>file</code> (Webpack context object), <code>fileName</code> (string) and <code>sectionName</code> (string) data.</p>
</div></div></div><noscript></noscript></main><script>(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)})(window,document,'script','//www.google-analytics.com/analytics.js','ga');ga('create', 'UA-60511795-1', 'auto');ga('send', 'pageview');</script></div></body></html>